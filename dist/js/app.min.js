angular.module("directorio.templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("app/views/empleado-detail.html","<div class=\"container-fluid text-center\">\n  <img ng-src=\"/img/{{ empDetailCtrl.empleado.pic }}\" width=\"200px\" alt=\"{{ empDetailCtrl.empleado }}\">\n  <h1>\n    {{ empDetailCtrl.empleado.fullName }}<br>\n    <small>{{ empDetailCtrl.empleado.title }}</small>\n  </h1>\n</div>\n\n<div ng-controller=\"TabsController as tabs\">\n  <ul class=\"nav nav-tabs\">\n    <li ng-class=\"{ active:tabs.tab === 1 }\"><a href=\"#\" ng-click=\"tabs.selectTab(1)\">Contacto</a></li>\n    <li ng-class=\"{ active:tabs.tab === 2 }\"><a href=\"#\" ng-click=\"tabs.selectTab(2)\">Info</a></li>\n  </ul>\n\n  <div class=\"tab-content\">\n\n    <div ng-show=\"tabs.tab === 1\">\n      <ul class=\"list-group\">\n        <li class=\"list-group-item\">\n          <h4 class=\"list-group-item-heading text-primary\">Teléfono</h4>\n          <p class=\"list-group-item-text\">\n            <span class=\"fa fa-lg fa-phone\"></span>\n            {{ empDetailCtrl.empleado.cellPhone }}\n          </p>\n        </li>\n        <li class=\"list-group-item\">\n          <h4 class=\"list-group-item-heading text-primary\">Correo Electrónico</h4>\n          <p class=\"list-group-item-text\">\n            <span class=\"fa fa-lg fa-envelope\"></span>\n            {{ empDetailCtrl.empleado.email }}\n          </p>\n        </li>\n        <li class=\"list-group-item\">\n          <h4 class=\"list-group-item-heading text-primary\">Twitter</h4>\n          <p class=\"list-group-item-text\">\n            <span class=\"fa fa-lg fa-twitter\"></span>\n            {{ empDetailCtrl.empleado.twitterId }}\n          </p>\n        </li>\n        <li class=\"list-group-item\">\n          <h4 class=\"list-group-item-heading text-primary\">Página Web</h4>\n          <p class=\"list-group-item-text\">\n            <span class=\"fa fa-lg fa-laptop\"></span>\n            {{ empDetailCtrl.empleado.blog }}\n          </p>\n        </li>\n      </ul>\n    </div>\n\n    <div ng-show=\"tabs.tab === 2\">\n      <ul class=\"list-group\">\n        <li class=\"list-group-item\" ng-show=\"empDetailCtrl.empleado.managerId != 0\">\n          <h4 class=\"list-group-item-heading text-primary\">Manager</h4>\n          <p class=\"list-group-item-text\">\n            <span class=\"fa fa-lg fa-user\"></span>\n            <a ng-href=\"/empleado/{{ empDetailCtrl.empleado.managerId }}\">{{ empDetailCtrl.empleado.managerName }}</a>\n          </p>\n        </li>\n        <li class=\"list-group-item\" ng-show=\"empDetailCtrl.empleado.reports > 0\">\n          <h4 class=\"list-group-item-heading text-primary\">\n            Personal a cargo\n            <span class=\"label label-info\">{{ empDetailCtrl.empleado.reports }}</span>\n          </h4>\n          <div class=\"list-group-item-text\" ng-controller=\"ReportsController as reports\">\n\n            <ul class=\"media-list\" ng-repeat=\"subordinado in reports.subordinados\">\n              <hr>\n              <li class=\"media\">\n                <div class=\"media-left\">\n                  <a ng-href=\"/empleado/{{ subordinado.id }}\">\n                    <img class=\"media-object\" width=\"64px\" ng-src=\"img/{{ subordinado.pic }}\" alt=\"{{ subordinado.fullName }}\">\n                  </a>\n                </div>\n                <div class=\"media-body\">\n                  <a ng-href=\"/empleado/{{ subordinado.id }}\">\n                    <h4 class=\"media-heading\">{{ subordinado.fullName }}</h4>\n                    <p>{{ subordinado.title }}  <span class=\"label label-info\">{{ subordinado.department }}</span></p>\n                  </a>\n                </div>\n              </li>\n            </ul>\n\n          </div>\n        </li>\n      </ul>\n    </div>\n\n  </div>\n</div>\n");
$templateCache.put("app/views/empleados-list.html","<form>\n  <div class=\"form-group\">\n    <input type=\"search\" class=\"form-control\" ng-model=\"empListCtrl.query\" placeholder=\"Busca un empleado...\">\n  </div>\n</form>\n\n<ul class=\"media-list\" ng-repeat=\"empleado in empListCtrl.empleados | filter:empListCtrl.query\">\n  <hr>\n  <li class=\"media\">\n    <div class=\"media-left\">\n      <a ng-href=\"/empleado/{{ empleado.id }}\">\n        <img class=\"media-object\" width=\"64px\" ng-src=\"img/{{ empleado.pic }}\" alt=\"{{ empleado.fullName }}\">\n      </a>\n    </div>\n    <div class=\"media-body\">\n      <a ng-href=\"/empleado/{{ empleado.id }}\">\n        <h4 class=\"media-heading\">{{ empleado.fullName }}</h4>\n        <p>{{ empleado.title }}  <span class=\"label label-info\">{{ empleado.department }}</span></p>\n      </a>\n    </div>\n  </li>\n</ul>\n");}]);
(function() {

  angular
    .module('directorio.services', ["ngResource"])
    .factory('Empleado', Empleado);

  function Empleado($resource) {
      return $resource("/db/:empleadoId.json", {}, {
        query: {
          method: "GET",
          params: { empleadoId: 'empleados'},
          isArray: true
        }
      });
  }
  Empleado.$inject = ["$resource"];;

})();

(function() {

  angular
    .module('directorio.controllers', ['directorio.services'])
    .controller('EmpleadosListController', EmpleadosListController)
    .controller('EmpleadoDetailController', EmpleadoDetailController)
    .controller('ReportsController', ReportsController)
    .controller('TabsController', TabsController);

  function EmpleadosListController($rootScope, Empleado) {
    var vm = this;
    this.empleados = Empleado.query();
    $rootScope.empleados = this.empleados;
  }
  EmpleadosListController.$inject = ["$rootScope", "Empleado"];

  function EmpleadoDetailController($routeParams, Empleado) {
    var vm = this;
    this.empleado = Empleado.get({ empleadoId: $routeParams.empleadoId });
  }
  EmpleadoDetailController.$inject = ["$routeParams", "Empleado"];

  function ReportsController($rootScope, $routeParams, Empleado) {

    // Busca que empleados tienen de manager, el Id que se pasa
    // por parámetro
    var findByManager = function(managerId) {
      if($rootScope.empleados) {
        var results = $rootScope.empleados.filter(function(empleado) {
          return managerId === empleado.managerId;
        });
        return results;
      }
    };

    var vm = this;
    this.subordinados = findByManager(parseInt( $routeParams.empleadoId ));
  }
  ReportsController.$inject = ["$rootScope", "$routeParams", "Empleado"];

  function TabsController() {
    this.tab = 1;
    this.selectTab = function(tab) {
      this.tab = tab;
    };
  }

})();

(function() {

  angular
    .module('directorio', [
      'ngRoute',
      'directorio.controllers',
      'directorio.services',
      'directorio.templates'
    ])
    .config(config);

  function config($locationProvider, $routeProvider) {

    $locationProvider.html5Mode(true);

    $routeProvider
      .when('/', {
        templateUrl: 'views/empleados-list.html',
        controller: 'EmpleadosListController',
        controllerAs: 'empListCtrl'
      })
      .when('/empleado/:empleadoId', {
        templateUrl: 'views/empleado-detail.html',
        controller: 'EmpleadoDetailController',
        controllerAs: 'empDetailCtrl'
      })
      .otherwise({
        redirectTo: '/'
      });
  }
  config.$inject = ["$locationProvider", "$routeProvider"];

})();
